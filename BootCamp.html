<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>The Enzo Project -- Boot Camp</title>
    <link rel="shortcut icon" href="favicon.png" />
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
    <script src="assets/js/google-code-prettify/prettify.js"></script> 
    <script>$(function () { prettyPrint() })</script> 

    <script src="js/bootstrap.min.js"></script>

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">

  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="#">Enzo</a>
          <ul class="nav">
            <li class="dropdown">
	      <a class="dropdown-toggle" data-toggle="dropdown" href="#" >Quick Links <span class="caret"></span></a>
	      <ul class="dropdown-menu">
                <li><a href="ReleaseNotes.html">Release Notes</a></li>
                <li><a href="doc/">Current Documentation</a></li>
                <li><a href="https://bitbucket.org/enzo/enzo-stable">Stable Code</a></li>
                <li><a href="https://bitbucket.org/enzo/enzo-dev">Development Code</a></li>
		<li><a href="BootCamp.html">Enzo Boot Camp</a></li>
                <li><a href="irc.html">IRC</a></li>
	      </ul>
            </li>
            <li><a href="index.html">Home</a></li>
            <li><a href="index.html#gettingenzo">Get Enzo</a></li>
            <li><a href="index.html#help">Help!</a></li>
            <li><a href="index.html#developing">Development</a></li>
            <li><a href="index.html#community">Community</a></li>
            <li class="dropdown">
	      <a class="dropdown-toggle" data-toggle="dropdown" href="#">Enzo Docs <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="docs/2.2/">Version 2.2</a></li>
                <li><a href="docs/2.1/">Version 2.1</a></li>
                <li><a href="docs/2.0/">Version 2.0</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container">

      <section id="home">
        <div class="hero-unit hero-border">
          <a name="home" class="anchor"><h1>The Enzo Project</h1></a>
        </div>
      </section>
      
      <section id="releasenotes">
        <div class="page-header">
          <a name="releasenotes" class="anchor"><h1>Boot Camp</h1></a>
        </div>
	
	<p>This is an unofficial quickstart guide to using Enzo, starting from checking out the Enzo and YT sources, through to building them, then to running an example problem and looking at its output. </p>
	
	<p>Before we get going too far, here are some websites that contain useful information or useful tools: </p>
	
	<ul>
	  <li> <a href="http://bitbucket.org/enzo/enzo-stable/" rel="nofollow">http://bitbucket.org/enzo/enzo-stable/</a> </li>
	  <li><a href="http://yt-project.org/" rel="nofollow">http://yt-project.org/</a> </li>
	  <li><a href="http://jacques.enzotools.org/" rel="nofollow">http://jacques.enzotools.org/</a> </li>
	  <li><a href="http://hub.yt-project.org/" rel="nofollow">http://hub.yt-project.org/</a> </li>
	</ul>
	
	<p>If you ever get stuck, please email <a href="https://groups.google.com/forum/#!forum/enzo-users" rel="nofollow">enzo-users</a>.  This is not just so that you can get an answer to your question, but also to let the developers know when something is not working or could be more clear in the documentation.  Particularly now that Enzo has many interlocking modules, unusual combinations of parameters may require some care, and the individual developers that have created those modules will be able to discuss them with you. </p>
	
	<h2>Getting Enzo</h2>

	<p>With the release of Enzo 2.0 (and we&#x27;re happy to have continued with the 2.1, 2.2, and 2.3 releases!), a number of things about previous versions have changed.  For starters, the version control system has changed from Subversion (a centralized version control system) to Mercurial (a distributed version control system.)  A side effect of this is that getting the latest version of the code requires Mercurial, which has a slightly different syntax than Subversion and which operates in a fundamentally different fashion. </p>
	
	<p>The Enzo documentation contains a discussion of some of the differences, as well as some suggestions for how to keep locally-versioned development private, for how to share it, and for how to navigate the repository.  Ultimately its goal is to put more power in the hands of users, so that collaboration can be swifter, broader, and more efficient. </p>
	
	<p>However, as noted above, it&#x27;s not always installed on all machines.  The yt project provides an installation script that creates a complete and isolated distribution of all the tools yt requires, including hg. It installs everything (including python) into a directory of your choosing, and can be deleted without affecting anything else on your system.  This installation script has been tested on most of the Teragrid as well as on a number of private clusters and Linux and OS X machines. </p>
	
	<p>The yt installation script now contains an option to check out a copy of the stable branch of Enzo, as well.  To get the installation script, download it from <a href="http://hg.yt-project.org/yt/raw/stable/doc/install_script.sh" rel="nofollow">http://hg.yt-project.org/yt/raw/stable/doc/install_script.sh</a> and open it in a text editor.  Set the variable INST_ENZO to 1, and execute it like so: </p>
	
	<pre class="prettyprint">$ bash install_script.sh</pre>
	
	<p>This will download all of the necessary dependencies for YT, which includes Mercurial and HDF5, and it will install them into an isolated directory. </p>
	
	<p>At the end of execution, you will be presented with a long concluding message.  In this message will be the path to Enzo. </p>
	
	<p>You must set the environment variables listed in the installation script whenever you want to use yt, or it may fail in some non-intuitive way. </p>
	
	<p>You can then use a pre-existing Makefile (if one exists for your machine) or modify one to point to either the system-wide installation of HDF5 and MPI or to the yt-installed HDF5 and the system-wide MPI.  However, since the process of setting up the Makefile can be a bit tricky, it&#x27;s discussed in more depth down below. </p>
	
	<h2>Setting Up Enzo</h2>
	
	<p>Change directories to the Enzo path, which should be resolvable as <tt>$(YT_DEST)/src/enzo-hg-stable</tt>.  The very first time you enter this directory, execute: </p>
	
	<pre class="prettyprint">$ ./configure</pre>
	
	<p>However, you will probably not want to do this multiple times.  This wipes out all configuration settings and restores them to defaults; this can lead to unexpected results.  It usually only needs to be run once, although in some instances (particularly when using version control) it may need to be run multiple times. </p>
	
	<p>In this directory there are several subdirectories: </p>
	
	<p><tt>bin</tt> <blockquote>This directory is seldom-used. </blockquote>
	
	<tt>doc</tt> <blockquote>This directory contains both the older documentation and the newer documentation.  The newer documentation is under <tt>manual/</tt>.  Note that the newer documentation is in a format called ReStructured Text, which is converted to HTML to be posted on the website.  It can be read in plain text.</blockquote>
	
	<tt>input</tt> <blockquote>These are files used as input to several test problems.  If Enzo fails at startup with a missing file, it is likely in this directory.  There are some additional scripts as well. </blockquote>
	
	<tt>run</tt> <blockquote>This directory (new with this release) contains example parameter files along with notes about expected output and scripts for plotting.  This is also the basis of the Enzo answer test suite, which compares results from one version of the code to results from previous versions of the code. </blockquote>
	
	<tt>src</tt> <blockquote>All the Enzo source, along with its affiliated utilities (described below) is contained here. </blockquote></p>
	
	<p>The source for Enzo, specifically, is contained in <tt>src/enzo/</tt>.  Because the Enzo Makefile is the basis for all other compilation, we&#x27;re going to examine that first. </p>
	
	<p>Change into the <tt>src/enzo/</tt> directory, and execute the command
<pre class="prettyprint">$ ls Make.mach.* </pre> </p>
	
	<p>This will come up with a list of potential Makefiles which have been pre-made.  If you see one that may be appropriate (for instance, if you&#x27;re on NICS Kraken, you might select <tt>Make.mach.nics-kraken</tt>) you can execute </p>
	
	<pre class="prettyprint">$ make machine-nics-kraken</pre>
	
	<p>For other machines, replace <tt>nics-kraken</tt> with the final segment of the Makefile name.  If you don&#x27;t see a Makefile that&#x27;s appropriate, you will want to copy one that is close (good starting points are <tt>Make.mach.unknown</tt> and <tt>Make.mach.linux-gnu</tt>) to a name that reflects the host you&#x27;re on.  You can then edit that Makefile, and you will need to set up the appropriate compilation information. </p>
	
	<p>Specifically, despite the fact that there are many variables, for the most part they will be straightforward to set; <tt>Make.mach.linux-gnu</tt> is a good reference.  However, you will need to examine with care the following variables: </p>
	
	<ul>
	  <li><tt>MACH_FFLAGS_INTEGER_32</tt> </li>
	  <li><tt>MACH_FFLAGS_INTEGER_64</tt> </li>
	  <li><tt>MACH_FFLAGS_REAL_32</tt> </li>
	  <li><tt>MACH_FFLAGS_REAL_64</tt> </li>
	</ul>
	
	<p>These are the source of many issues with compiling Enzo.  Enzo uses a pre-defined bitsize for all compilation and arithmetic; this is done through a <tt>#define</tt> in the C/C++ code and through Fortran compiler arguments in the Fortran code.  This leads to a mismatch: while the C/C++ code will always have the correct bitwidth, the Fortran code must have these variables set properly to ensure the correct bitwidth. </p>
	
	<p>For an example of how to set these with GCC, see the <tt>Make.mach.linux-gnu</tt> Makefile.  For an example of how to set these with the Intel Compiler, see the <tt>Make.mach.triton-intel</tt> Makefile.  For an example of how to set these with the PGI Compiler, see the <tt>Make.mach.nics-kraken</tt> Makefile. </p>
	
	<p>If your compilation fails on the file <tt>acml_st1.F</tt>, this is the problem. </p>
	
	
	<h2>Building Enzo</h2>
	
	<p>Once you have an Enzo Makefile and have executed the correct <tt>make machine-something</tt> command, execute: </p>
	
	<pre class="prettyprint">$ make show-config</pre>
	
	<p>This will show the current configuration.  <tt>make help-config</tt> will describe how to turn these options on or off.  Some (<tt>python-yes</tt>, <tt>hypre-yes</tt>, a few others) will require external libraries. </p>
	
	<p>The default options for Enzo are mostly fine for beginning, although it defaults to using <tt>opt-debug</tt>, which typically means using no compiler optimizations.  <tt>opt-high</tt> is supposed to be safe, and <tt>opt-aggressive</tt> is often faster but less reliable.  (For instance, at O3, some compilers are not guaranteed to be deterministic.) When you are satisfied with your configuration options, it is time to build Enzo: </p>
	
	<pre class="prettyprint">$ make</pre>
	
	<p>If this command fails, checking over the output of <tt>out.compile</tt> may indicate why.  If this command fails and the error output does not help to elucidate why, please feel free to email <tt>enzo-users-l</tt> with the error output and your <tt>Make.mach</tt> file. </p>
	
	<p>If the compilation succeeds, Enzo will report this to you and a new file named <tt>enzo.exe</tt> will be created. </p>
	
	
	<h2>Running a Test Problem</h2>
	
	<p>We'll now try running Enzo on a test problem.  Copy <tt>enzo.exe</tt> to the <tt>run/Hydro/Hydro-3D/CollapseTestNonCosmological</tt> directory, and then change to that directory. </p>
	
	<pre class="prettyprint">$ cp enzo.exe ../../run/Hydro/Hydro-3D/CollapseTestNonCosmological
$ cd ../../run/Hydro/Hydro-3D/CollapseTestNonCosmological</pre>
	
        <p>If you plan on doing Enzo development, you may wish to use <tt>ln -s</tt> instead of <tt>cp</tt> to enable faster turnaround. </p>
	
	<p>We'll now start Enzo using the parameter file in that directory.  You can examine that parameter file before beginning, as it is commented.  All Enzo parameters are listed and described in the documentation, but it&#x27;s also often convenient to simply <tt>grep</tt> through the source for them. </p>
	
	<p>To execute Enzo, we&#x27;re going to tell it the parameter file and supply the <tt>-d</tt> argument, indicating debug mode. </p>
	
	<pre class="prettyprint">$ ./enzo.exe -d CollapseTestNonCosmological.enzo</pre>
	
	<p>On some machine you may have to execute this using <tt>mpirun</tt> or in a batch cluster.  For the purposes of this bootstrap, we will assume that execution in serial on the current host is acceptable. </p>
	
	<p>This problem will run for a little while, and it will create outputs in the current directory at fixed time intervals.  Each output will be self-contained in a directory, matching the pattern <tt>DD####/DD####</tt> where <tt>####</tt> is a 0-padded, 4 digit counter. </p>
	
	
	<h2>Examining the Output</h2>
	
	<p>The first thing to do is to take a slice of the initial conditions.  If you have set up the path to yt correctly as indicated by its install script, you should be able to execute this command: </p>
	
	<pre class="prettyprint">$ yt plot DD0000/DD0000</pre>
	
	<p>This will take three slices through the center of the domain along each axis, as sliced through the very first output.  The images will be saved to the subdirectory <tt>frames</tt>. </p>
	
	<p>Now let&#x27;s take a look at <tt>DD0010</tt>: </p>

	<pre class="prettyprint">$ yt plot DD0010/DD0010</pre>
	
	<p>By this point the simulation has not collapsed very far.  Feel free to check later outputs. </p>
	
	<p>Another handy command is <tt>yt stats</tt>, which will describe the current state of the simulation in a couple metrics. </p>
	
	
	<h2>Wrapping Up, Where Else to Go</h2>
	
	<p>At this point, you&#x27;ve (hopefully!) run an Enzo simulation.  You should also have yt set up.  You can also examine your data interactively using either <a href="http://jacques.enzotools.org/" rel="nofollow">Jacques</a> or <a href="https://wci.llnl.gov/codes/visit/VisIT" rel="nofollow">VisIt</a>.</p>
	
	<p>With luck this has gotten you started.  The Enzo documentation contains pointers and cookbook ideas, but the <tt>run/</tt> directory also contains many helpful parameter files and plotting scripts.  The yt documentation (at <a href="http://yt-project.org/" rel="nofollow">http://yt-project.org/</a>) also contains a number of sample recipes for analysis as well as many more complicated examples and documents. </p>
	
	<p>Please feel encouraged to sign up for the <a href="https://groups.google.com/forum/#!forum/enzo-users" rel="nofollow">enzo-users</a> and <a href="http://lists.spacepope.org/listinfo.cgi/yt-users-spacepope.org" rel="nofollow">YT mailing lists</a>, and ask any questions there if you have them. </p>
	
	<p>Good luck! </p>
	
      </section>
      
      <footer>
	<p>Enzo enjoys the support of numerous universities, funding agencies
	and labs.</p>
      </footer>
      
    </div> <!-- /container -->
    
  </body>
</html>
